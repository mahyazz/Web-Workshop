<p align="center">
    <img src="https://github.com/mahyazz/web_workshop/Postman/postman.svg" alt="Postman Logo">
</p>

<p align="center">
    مقدمه‌ای بر Postman
    <br/>
    تحقیق پایانی برنامه سازی وب، دانشگاه صنعتی شریف
    <br/>
    ارائه دهنده درس: جناب آقای یحیی پورسلطانی
    <br/>
    نویسندگان: محیا ضرابی‌زاده، زهرا تهامی
</p>

<div dir="rtl">

## مقدمه

پستمن ابزاری قدرتمند و چندکاره برای توسعه، آزمون، و همکاری در API است. این ابزار به توسعه‌دهندگان پلتفرمی جامع برای طراحی، آزمون، مستندسازی، و اشتراک‌گذاری موثر APIها ارائه می‌دهد. بیایید به معرفی پستمن بپردازیم و نحوه شروع کار با این ابزار ضروری برای توسعه API را بررسی کنیم.

## پستمن چیست؟

پستمن یک ابزار آزمون API (Application Programming Interface) است که به توسعه‌دهندگان اجازه می‌دهد تا APIها را طراحی، آزمون، و مستندسازی کنند و در این فرآیند به صورت گروهی همکاری کنند[1][3]. این ابزار یک رابط کاربری گرافیکی برای ارسال درخواست‌های HTTP و تحلیل پاسخ‌ها فراهم می‌کند، که کار با APIها را در پلتفرم‌های مختلف از جمله ویندوز، مک‌او‌اس، و لینوکس آسان‌تر می‌سازد[3].

## ویژگی‌های کلیدی پستمن

پستمن طیف گسترده‌ای از ویژگی‌ها را ارائه می‌دهد که جنبه‌های مختلف توسعه و آزمون API را پوشش می‌دهند. برخی از ویژگی‌های برجسته‌ی آن عبارت‌اند از:

* ساخت درخواست HTTP: پستمن به شما امکان ایجاد درخواست‌های HTTP با متودها، هدرها، پارامترها، و بدنه‌های درخواست متفاوت را می‌دهد. شما می‌توانید این درخواست‌ها را برای استفاده‌ی مجدد در آینده ‌خیر، یا آن‌ها را در مجموعه‌ها دسته‌بندی کنید.
* نمایش پاسخ: پستمن یک نمای جامع از پاسخ API، شامل کد وضعیت، هدرها، و بدنه پاسخ، ارائه می‌دهد. این ابزار از فرمت‌های مختلف داده مانند JSON، XML، و داده‌های فرم‌کدگذاری‌شده پشتیبانی می‌کند.
* مدیریت محیط‌ها: پستمن به شما اجازه می‌دهد محیط‌های متعددی را تعریف کنید که هر کدام متغیرهای مخصوص خود را دارند. این ویژگی به طور خاص برای جابه‌جایی بین محیط‌های توسعه، آزمایش، و تولید بدون نیاز به تغییر URL‌های درخواست یا هدرها مفید است.
* مکانیزم‌های احراز هویت: پستمن از روش‌های مختلف احراز هویت، از جمله کلیدهای API، OAuth 1.0a، OAuth 2.0 و احراز هویت پایه، پشتیبانی می‌کند. این ابزار فرآیند تنظیم و مدیریت احراز هویت برای درخواست‌های API شما را بسیار ساده‌تر می‌کند.
* اسکریپت‌های تست: پستمن به شما امکان می‌دهد با استفاده از جاوا اسکریپت برای اعتبارسنجی رفتار API‌های خود اسکریپت‌های آزمون بنویسید. این آزمون‌ها می‌توانند کدهای وضعیت پاسخ، هدرها، و محتوای بدنه را بررسی کنند و ثبات و قابلیت اطمینان بودن API شما را بسنجند.
* پشتیبانی از کد جاوا اسکریپت: اپلیکیشن پستمن از اجرای کدهای جاوا اسکریپت پشتیبانی می‌کند. این ویژگی به شما امکان انجام عملیات‌های داینامیک مانند تولید داده‌ی تصادفی، دستکاری پارامترهای درخواست، یا استخراج داده از پاسخ‌ها برای استفاده در درخواست‌های بعدی، را می‌دهد.
* پشتیبانی از انواع فرمت‌های داده:  پستمن با فرمت‌های مختلف داده مانند JSON، XML، فرم‌کدگذاری‌شده، و داده‌های باینری کار می‌کند. این ابزار برای پاسخ‌های JSON و XML، قابلیت syntax highlighting و automatic parsing فراهم می‌کند که کار با داده‌های API را آسان‌تر می‌سازد.
* همکاری: پستمن به شما فضاهای کاری تیمی ارائه می‌دهد، که به کاربران متعدد اجازه می‌دهد بر روی پروژه‌های API همکاری کنند. اعضای تیم می‌توانند مجموعه‌ها، محیط‌ها، و مجموعه‌های آزمون را به اشتراک بگذارند، که به ثبات و تسهیل همکاری کمک می‌کند.
* مستندسازی API: پستمن می‌تواند براساس درخواست‌ها و موارد آزمون تعریف‌شده در مجموعه‌های شما، به طور خودکار مستنداتی برای API‌هایتان تولید کند. این ویژگی در به‌روز و در دسترس نگه داشتن مستندات API کمک شایانی می‌کند.
* نظارت: پستمن دارای یک ویژگی نظارت است که به شما امکان برنامه‌ریزی چک‌هایی برای API‌هایتان می‌دهد. این چک‌ها می‌توانند در دسترس بودن، زمان پاسخ، و درستی API‌های شما را بررسی کنند و به شما در شناسایی و رفع مشکلات به صورت پیشگیرانه کمک کنند.


## شروع کار با پستمن

برای شروع استفاده از پستمن، مراحل زیر را دنبال کنید:
1. [دانلود و نصب پستمن]( https://www.postman.com/downloads/).
2. [ایجاد حساب کاربری پستمن]( https://identity.getpostman.com/signup?continue=https%3A%2F%2Fgo.postman.co%2Fhome) (این مرحله اختیاری است اما برای هم‌گام‌سازی و همکاری در ادامه، توصیه می‌شود).
3. اجرای برنامه پستمن.

پس از باز کردن پستمن، رابط اصلی که شامل چند بخش کلیدی است را مشاهده خواهید کرد[3]:
* هدر: شامل گزینه‌هایی برای ایجاد درخواست‌های جدید، وارد کردن داده‌ها و دسترسی به ویژگی‌های دیگر.
* نوار کناری: نمایش مجموعه‌ها، محیط‌ها، و عناصر سازمان‌دهی دیگر.
* سازنده: ناحیه اصلی که در آن درخواست‌ها را می‌سازید و ارسال می‌کنید.
* پاسخ: نمایش نتایج درخواست‌های API شما.


### ارسال اولین درخواست

بیایید با ارسال یک درخواست GET ساده به یک API عمومی شروع کنیم. از API JSONPlaceholder استفاده خواهیم کرد که برای اهداف آزمایشی، داده‌های جعلی فراهم می‌کند. 

مراحل ارسال درخواست:
1. بر روی دکمه "+" در هدر کلیک کنید تا یک درخواست جدید ایجاد شود.
2. در فیلد URL درخواست، لینک زیر را وارد کنید (اطمینان حاصل کنید که روش HTTP به GET تنظیم شده است).

<div dir="ltr">

```
https://jsonplaceholder.typicode.com/posts/1
```

</div>

3. بر روی دکمه "Send" کلیک کنید.

در پنل پایین صفحه، باید پاسخی این چنینی مشاهده کنید:

<div dir="ltr">

```
{
  "userId": 1,
  "id": 1,
  "title": "sunt aut facere repellat provident occaecati excepturi optio reprehenderit",
  "body": "quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto"
}
```

</div>


### کار با مجموعه‌ها

مجموعه‌ها در پستمن به شما امکان می‌دهند درخواست‌هایAPI تان را سازمان‌دهی و گروه‌بندی کنید[1]. این ویژگی به خصوص برای مدیریت APIهای پیچیده یا پروژه‌های متعدد بسیار مفید است.

برای ایجاد یک مجموعه:
1. بر روی "Collections" در نوار کناری کلیک کنید.
2. بر روی دکمه "+" کلیک کنید تا یک مجموعه‌ی جدید ایجاد شود.
3. مجموعه خود را نام‌گذاری کنید (مثلاً "JSONPlaceholder API").
4. بر روی "Create" کلیک کنید تا مجموعه ذخیره شود.

اکنون می‌توانید درخواست‌هایتان را به این مجموعه اضافه کنید:
1. بر روی نام مجموعه کلیک راست کنید.
2. گزینه "Add request" را انتخاب کنید.
3. درخواست خود را نام‌گذاری کنید (مثلاً "Get Single Post").
4. درخواست را همانطور که قبلاً توضیح داده شد پیکربندی کنید.
5. بر روی "Save" کلیک کنید تا درخواست به مجموعه اضافه شود.

### استفاده از متغیرهای محیطی

متغیرهای محیطی در پستمن این امکان را برای شما ایجاد می‌کنند تا مقادیر را در درخواست‌های متعدد ذخیره و بازاستفاده کنید[1]. این ویژگی به خصوص برای مدیریت محیط‌های مختلف (مثلاً توسعه، آزمون، تولید) یا ذخیره‌ی توکن‌های احراز هویت مفید است.

برای ایجاد یک محیط:
1. بر روی "Environments" در نوار کناری کلیک کنید.
2. بر روی دکمه "+" کلیک کنید تا یک محیط جدید ایجاد شود.
3. محیط خود را نام‌گذاری کنید (مثلاً "JSONPlaceholder").
4. یک متغیر به نام "base_url" با مقدار "https://jsonplaceholder.typicode.com" اضافه کنید.
5. بر روی "Save" کلیک کنید تا محیط ایجاد شود.

اکنون می‌توانید از این متغیر در درخواست‌های خود استفاده کنید:
1. محیط "JSONPlaceholder" را از منوی کشویی در گوشه بالا سمت راست انتخاب کنید.
2. در URL درخواست خود، آدرس پایه را با {{base_url}} جایگزین کنید، یعنی URL درخواست شما باید نهایتا به این شکل دربیاید: {{base_url}}/posts/1.
هنگام ارسال درخواست، پستمن به طور خودکار {{base_url}} را با مقدار ذخیره شده در محیط جایگزین خواهد کرد.

### نوشتن آزمون‌ها

پستمن همچنین به شما این امکان را می‌دهد که برای درخواست‌های API خود، با استفاده از جاوااسکریپت آزمون بنویسید[1]. این آزمون‌ها می‌توانند داده‌های پاسخ را تأیید کنند، کدهای وضعیت را بررسی کنند، و سایر اعتبارسنجی‌ها را انجام دهند.

بیایید یک آزمون ساده به درخواست "Get Single Post" اضافه کنیم:
1. در سازنده درخواست، بر روی تب "Tests" کلیک کنید.
2. کد زیر را اضافه کنید:
<div dir="ltr">

```
pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
});

pm.test("Response has correct user ID", function () {
    var jsonData = pm.response.json();
    pm.expect(jsonData.userId).to.eql(1);
});

```

</div>

3. درخواست را ارسال کنید.
4. تب "Test Results" را در بخش پاسخ بررسی کنید تا نتایج آزمون را ببینید.

این آزمون‌ها تأیید می‌کنند که کد وضعیت پاسخ 200 است و userId در پاسخ برابر با 1 است.

### خودکارسازی جریان‌های کاری با نیومن

نیومن همراه خط فرمان پستمن است که به شما اجازه می‌دهد مجموعه‌های خود را از خط فرمان اجرا و آزمون کنید[1]. این ویژگی به خصوص برای ادغام آزمون‌های پستمن در خط لوله CI/CD مفید است.

برای استفاده از نیومن:
1. Node.js را بر روی سیستم خود نصب کنید.
2. برای نصب نیومن، دستور زیر را داخل ترمینال اجرا کنید:
<div dir="ltr">

```
npm install -g newman
```

</div>
3. در پستمن، بر روی مجموعه‌ی موردنظر خود کلیک راست کرده و گزینه‌ی "Export" را انتخاب کنید.
4. در ترمینال، به دایرکتوری‌ای که مجموعه اکسپورت‌شده‌ی شما در آن قرار دارد بروید.
5. دستور زیر را اجرا کنید (به جای YourCollection.json نام مجموعه‌ی خود را قرار دهید):

<div dir="ltr">

```
newman run YourCollection.json
```

</div>


### مستندسازی API

پستمن می‌تواند به طور خودکار مستنداتی برای API شما بر اساس مجموعه‌های شما تولید کند[1]. این ویژگی به حفظ مستندات API به روز و دسترسی آسان کمک می‌کند.

برای دیدن مستندات:
1. بر روی مجموعه خود در نوار کناری کلیک کنید.
2. بر روی دکمه "View documentation" در پنل سمت راست کلیک کنید.

اگر می‌خواهید این مستندات را به اشتراک بگذارید، بر روی دکمه‌ی "Publish" در گوشه بالا سمت راست کلیک کنید.

### همکاری با فضاهای کاری تیمی

پستمن فضاهای کاری تیمی را برای همکاری در پروژه‌های API فراهم می‌کند[1]. برای شروع همکاری:
1. بر روی دکمه "Workspaces" در هدر کلیک کنید.
2. گزینه‌ی "Create Workspace" را انتخاب کنید.
3. "Team" را به عنوان نوع فضای کاری انتخاب کنید.
4. فضای کاری خود را نام‌گذاری کرده و اعضای تیم را دعوت کنید.
5. مجموعه‌ها و محیط‌های خود را به این فضای کاری منتقل کنید.

اکنون اعضای تیم شما می‌توانند با هم در پروژه‌های API یکسان کار کنند و مجموعه‌ها، محیط‌ها، و منابع دیگر را به اشتراک بگذارند.


### نتیجه‌گیری

پستمن ابزاری ارزشمند برای توسعه و آزمون API  است. این ابزار می‌تواند فرآیند توسعه API شما را بیشتر بهبود ببخشند و همکاری درون تیمی را آسان‌تر کند. هدف این آموزش، پوشش دادن اصول اولیه‌ی شروع کار با پستمن، از جمله ارسال درخواست‌ها، سازماندهی مجموعه‌ها، استفاده از متغیرهای محیطی، نوشتن آزمون‌ها، خودکارسازی جریان‌های کاری با نیومن، تولید مستندات، و همکاری با فضاهای کاری تیمی بود. امید است که برای شما مفید واقع شده باشد.
 
به یاد داشته باشید، تمرین کلید تسلط بر پستمن است. انواع مختلف درخواست‌ها آزمایش کنید، آزمون‌های پیچیده‌تر بنویسید، و ویژگی‌های مختلف پستمن را بررسی کنید. با زمان و تجربه، قادر خواهید بود از پستمن به طور کامل بهره‌برداری کنید و فرآیند توسعه API خود را کارآمدتر کنید.

### مراجع

[1] https://learning.postman.com/docs/introduction/overview/

[2] https://www.coursehero.com/file/37994877/Postman-Essaydocx/

[3] https://www.tutorialspoint.com/postman/postman_introduction.html/

[4] https://www.coursehero.com/file/66153937/Essay-4-Postman-Epilogue2docx/

[5] https://learning.postman.com/docs/getting-started/basics/postman-basics/
